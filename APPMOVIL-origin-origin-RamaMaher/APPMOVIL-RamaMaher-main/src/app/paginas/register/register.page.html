<ion-card class="cardRegister">
  <ion-card-header class="card-header" style="text-align: center;">
    <ion-card-title style="width: 100%;">Registro</ion-card-title>
  </ion-card-header>

  <form #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)">
    
    <!-- Nombre de usuario -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Nombre de usuario</ion-label>
      <ion-input 
        type="text" 
        required 
        [(ngModel)]="registerData.username" 
        #username="ngModel"
        name="username">
      </ion-input>
    </ion-item>
    <div *ngIf="username.invalid && (username.dirty || username.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small>Nombre de usuario es requerido.</small>
    </div>

    <!-- Correo electrónico -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Email</ion-label>
      <ion-input 
        type="email" 
        required 
        email
        [(ngModel)]="registerData.email" 
        #email="ngModel"
        name="email">
      </ion-input>
    </ion-item>
    <div *ngIf="email.invalid && (email.dirty || email.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small *ngIf="email.errors?.['required']">Email es requerido.</small>
      <small *ngIf="email.errors?.['email']">Email debe ser válido.</small>
    </div>

    <!-- Contraseña -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Contraseña</ion-label>
      <ion-input 
        type="password" 
        required 
        minlength="6"
        [(ngModel)]="registerData.password" 
        #password="ngModel"
        name="password">
        <ion-input-password-toggle slot="end"></ion-input-password-toggle>
      </ion-input>
    </ion-item>
    <div *ngIf="password.invalid && (password.dirty || password.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small *ngIf="password.errors?.['required']">La contraseña es requerida.</small>
      <small *ngIf="password.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</small>
    </div>

    <!-- Confirmación de contraseña -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Confirmar contraseña</ion-label>
      <ion-input 
        type="password" 
        required 
        [(ngModel)]="registerData.confirmPassword" 
        #confirmPassword="ngModel"
        name="confirmPassword">
        <ion-input-password-toggle slot="end"></ion-input-password-toggle>
      </ion-input>
    </ion-item>
    <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small>La confirmación de la contraseña es requerida.</small>
      <small *ngIf="registerData.password !== registerData.confirmPassword">Las contraseñas no coinciden.</small>
    </div>

    <!-- Nombre -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Nombre</ion-label>
      <ion-input 
        type="text" 
        required 
        [(ngModel)]="registerData.firstName" 
        #firstName="ngModel"
        name="firstName">
      </ion-input>
    </ion-item>
    <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small>El nombre es requerido.</small>
    </div>

    <!-- Apellido -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Apellido</ion-label>
      <ion-input 
        type="text" 
        required 
        [(ngModel)]="registerData.lastName" 
        #lastName="ngModel"
        name="lastName">
      </ion-input>
    </ion-item>
    <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small>El apellido es requerido.</small>
    </div>

    <!-- Teléfono -->
    <ion-item>
      <ion-label position="floating" color="tertiary">Teléfono</ion-label>
      <ion-input 
        type="tel" 
        required 
        [(ngModel)]="registerData.phone" 
        #phone="ngModel" 
        name="phone"
        maxlength="12"
        (ionInput)="enforceNumeric($event)">
      </ion-input>
    </ion-item>
    <div *ngIf="phone.invalid && (phone.dirty || phone.touched || registerForm.submitted)" style="color: red; padding-left: 16px;">
      <small>El teléfono es requerido y debe contener solo números.</small>
    </div>
    

    <!-- Botón de Registro -->
    <ion-button 
      [routerLink]="['/home']"
      expand="block" 
      type="submit" 
      [disabled]="registerForm.invalid"> <!-- Deshabilitado si el formulario es inválido -->
      Registrarse
    </ion-button>

  </form>

  <ion-button fill="clear" [routerLink]="['/login']">
    ¿Ya tienes cuenta? Iniciar sesión
  </ion-button>

</ion-card>
